<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snapchat Username Checker</title>
  <style>
    body {
      font-family: 'Avenir Next', 'Segoe UI', sans-serif;
      background-color: #FFFC00;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: #333;
    }
    
    .container {
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
      width: 90%;
      max-width: 500px;
      padding: 30px;
      text-align: center;
    }
    
    h1 {
      color: #000;
      margin-bottom: 30px;
    }
    
    .logo {
      width: 60px;
      height: 60px;
      background-color: #FFFC00;
      border-radius: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0 auto 20px;
    }
    
    .ghost {
      font-size: 36px;
    }
    
    .input-group {
      position: relative;
      margin-bottom: 30px;
    }
    
    input {
      width: 100%;
      padding: 14px 20px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      box-sizing: border-box;
      transition: all 0.3s;
    }
    
    input:focus {
      border-color: #FFFC00;
      outline: none;
      box-shadow: 0 0 0 3px rgba(255, 252, 0, 0.2);
    }
    
    button {
      background-color: #FFFC00;
      color: #000;
      border: none;
      border-radius: 8px;
      padding: 14px 28px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    button:hover {
      background-color: #E6E300;
      transform: translateY(-2px);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    .result {
      margin-top: 30px;
      padding: 20px;
      border-radius: 8px;
      font-weight: bold;
      display: none;
    }
    
    .available {
      background-color: #E3FCEF;
      color: #0F5132;
      border: 1px solid #A3E4C9;
    }
    
    .taken {
      background-color: #FEECEC;
      color: #842029;
      border: 1px solid #F5C2C7;
    }
    
    .loading {
      display: none;
      justify-content: center;
      margin: 20px 0;
    }
    
    .loading div {
      width: 10px;
      height: 10px;
      margin: 0 5px;
      background-color: #FFFC00;
      border-radius: 50%;
      animation: bounce 0.9s infinite alternate;
    }
    
    .loading div:nth-child(2) {
      animation-delay: 0.3s;
    }
    
    .loading div:nth-child(3) {
      animation-delay: 0.6s;
    }
    
    @keyframes bounce {
      to {
        transform: translateY(-10px);
      }
    }
    
    .error {
      color: #842029;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <div class="ghost">ðŸ‘»</div>
    </div>
    <h1>Snapchat Username Checker</h1>
    <div class="input-group">
      <input 
        type="text" 
        id="username" 
        placeholder="Enter Snapchat username" 
        autocomplete="off"
      >
      <div class="error" id="error-message">Please enter a valid username</div>
    </div>
    <button id="check-button">Check Availability</button>
    
    <div class="loading" id="loading">
      <div></div>
      <div></div>
      <div></div>
    </div>
    
    <div class="result" id="result"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const usernameInput = document.getElementById('username');
      const checkButton = document.getElementById('check-button');
      const resultDiv = document.getElementById('result');
      const loadingDiv = document.getElementById('loading');
      const errorMessage = document.getElementById('error-message');
      
      // Function to validate username format
      function isValidUsername(username) {
        // Snapchat usernames can only contain letters, numbers, periods, hyphens, and underscores
        // Between 3-15 characters
        const regex = /^[a-zA-Z0-9._-]{3,15}$/;
        return regex.test(username);
      }
      
      // Function to check if a Snapchat username is taken by attempting to load its profile page
      function checkUsername(username) {
        return new Promise((resolve, reject) => {
          // Show loading animation
          loadingDiv.style.display = 'flex';
          
          try {
            // Create URL for the Snapchat profile
            const snapchatUrl = `https://www.snapchat.com/add/${username}`;
            
            // Open a new window to check if the profile exists
            const newWindow = window.open(snapchatUrl, '_blank', 'width=1,height=1');
            
            if (!newWindow) {
              // If popup is blocked, fallback to our best guess
              resolve({ isTaken: true, message: "Popup blocked. Username likely taken." });
              return;
            }
            
            // Listen for the window to load
            setTimeout(() => {
              try {
                // Try to check if the page loaded successfully
                // For Snapchat, if a profile exists, it will load without redirecting
                // If it doesn't exist, it might redirect or show an error page
                
                // Attempt to check the final URL - this may not always work due to cross-origin restrictions
                if (newWindow.closed) {
                  resolve({ isTaken: false, message: "Username might be available (window closed early)" });
                } else {
                  try {
                    // Try to access location, which will fail if cross-origin rules apply
                    const finalUrl = newWindow.location.href;
                    const isTaken = finalUrl.includes(username);
                    resolve({ isTaken, message: isTaken ? "Username is taken" : "Username might be available" });
                  } catch (e) {
                    // If we can't access the URL due to cross-origin policies, we'll make our best guess
                    // Most likely the profile exists if we couldn't detect a redirect
                    resolve({ isTaken: true, message: "Username is likely taken" });
                  }
                }
              } catch (error) {
                resolve({ isTaken: false, message: "Username might be available" });
              } finally {
                // Close the window regardless of the result
                if (newWindow && !newWindow.closed) {
                  newWindow.close();
                }
              }
            }, 3000); // Wait 3 seconds to check
          } catch (error) {
            reject(error);
          }
        });
      }
      
      // Add event listener to the button
      checkButton.addEventListener('click', async function() {
        const username = usernameInput.value.trim();
        
        // Reset UI
        resultDiv.style.display = 'none';
        errorMessage.style.display = 'none';
        
        // Validate username
        if (!isValidUsername(username)) {
          errorMessage.style.display = 'block';
          return;
        }
        
        // Show loading animation
        loadingDiv.style.display = 'flex';
        
        try {
          // Check username availability by trying to load the Snapchat profile
          const result = await checkUsername(username);
          
          // Hide loading animation
          loadingDiv.style.display = 'none';
          
          // Display result
          resultDiv.style.display = 'block';
          
          if (result.isTaken) {
            resultDiv.textContent = `@${username} is already taken.`;
            resultDiv.className = 'result taken';
          } else {
            resultDiv.textContent = `@${username} is likely available!`;
            resultDiv.className = 'result available';
          }
        } catch (error) {
          console.error("Error checking username:", error);
          
          // Hide loading animation
          loadingDiv.style.display = 'none';
          
          // Display error
          resultDiv.style.display = 'block';
          resultDiv.textContent = 'An error occurred. Please try again.';
          resultDiv.className = 'result taken';
        }
      });
      
      // Also check on Enter key press
      usernameInput.addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
          checkButton.click();
        }
      });
    });
  </script>
</body>
</html>
